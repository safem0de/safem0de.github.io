<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SBC Calculator by Safem0de</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 20px;
      }
      .result {
        margin-top: 20px;
        font-size: 18px;
        font-weight: bold;
      }
      .fixed-height {
        height: 150px; /* Set your desired fixed height */
        object-fit: cover; /* Ensures the image fits within the container without distortion */
      }
    </style>
  </head>
  <body>
    <!-- <div id="alertPlaceholder" class="mt-3"></div> -->
    <div id="toastContainer" class="position-fixed top-0 end-0 p-3" style="z-index: 1100;"></div>

    <div class="container text-center">
      <h1 class="text-center my-4">SBC Calculator</h1>
      
      <div class="row">
        <div class="col-sm-4 col-md-4 mb-3"></div>
        <div class="col-sm-4 col-md-4 mb-3">
          <label for="targetAverage" class="form-label">Target Average:</label>
          <input type="number" class="form-control" id="targetAverage" min="10" required/>
        </div>
      </div>
      <div class="col-sm-4 col-md-4 mb-3"></div>
    </div>

    <hr>

      <div class="row d-flex justify-content-center">
        <div class="col-sm-3 col-md-3 mb-3"></div>

        <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
          <div class="card" style="width: 10rem">
            <img src="static\plate_01.png" class="card-img-top" alt="Card_1" />
            <div class="card-body">
              <label for="card1" class="form-label">Card 1:</label>
              <input type="number" class="form-control" id="card1" onkeydown="handleKeyPress(event)" min="10" required/>
            </div>
          </div>
        </div>

        <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
          <div class="card" style="width: 10rem">
            <img src="static\plate_01.png" class="card-img-top" alt="Card_2" />
            <div class="card-body">
              <label for="card2" class="form-label">Card 2:</label>
              <input type="number" class="form-control" id="card2" onkeydown="handleKeyPress(event)"/>
            </div>
          </div>
        </div>

          <div class="col-sm-3 col-md-3 mb-3"></div>
        </div>


      <div class="row d-flex justify-content-center">
        <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_3" />
              <div class="card-body">
                <label for="card3" class="form-label">Card 3:</label>
                <input type="number" class="form-control" id="card3" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>

          <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_4" />
              <div class="card-body">
                <label for="card4" class="form-label">Card 4:</label>
                <input type="number" class="form-control" id="card4" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_5" />
              <div class="card-body">
                <label for="card5" class="form-label">Card 5:</label>
                <input type="number" class="form-control" id="card5" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_6" />
              <div class="card-body">
                <label for="card6" class="form-label">Card 6:</label>
                <input type="number" class="form-control" id="card6" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>
      </div>

      <div class="row d-flex justify-content-center">
        <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_7" />
              <div class="card-body">
                <label for="card7" class="form-label">Card 7:</label>
                <input type="number" class="form-control" id="card7" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_8" />
              <div class="card-body">
                <label for="card8" class="form-label">Card 8:</label>
                <input type="number" class="form-control" id="card8" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_9" />
              <div class="card-body">
                <label for="card9" class="form-label">Card 9:</label>
                <input type="number" class="form-control" id="card9" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>

          <div class="col-sm-3 col-md-3 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_10" />
              <div class="card-body">
                <label for="card10" class="form-label">Card 10:</label>
                <input type="number" class="form-control" id="card10" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>
      </div>

      <div class="row justify-content-center">
        <div class="col-sm-4 col-md-4 mb-3"></div>

        <div class="col-sm-4 col-md-4 mb-3 d-flex justify-content-center">
            <div class="card" style="width: 10rem">
              <img src="static\plate_01.png" class="card-img-top" alt="Card_11" />
              <div class="card-body">
                <label for="card11" class="form-label">Card 11:</label>
                <input type="number" class="form-control" id="card11" onkeydown="handleKeyPress(event)"/>
              </div>
            </div>
          </div>

        <div class="col-sm-4 col-md-4 mb-3"></div>
      </div>

      <button class="btn btn-primary w-100" onclick="calculateAverage()">
        Calculate
      </button>

      <div class="result text-center mt-4" id="result"></div>
    </div>

    <script>

        function handleKeyPress(event) {
            if (event.key === "Enter") {
                event.preventDefault(); // Prevent default form submission behavior
                calculateAverage();

                // Find the next input element
                const currentInput = event.target;
                const formElements = Array.from(document.querySelectorAll("input"));
                const currentIndex = formElements.indexOf(currentInput);

                // Focus the next input if it exists
                if (currentIndex >= 0 && currentIndex < formElements.length - 1) {
                formElements[currentIndex + 1].focus();
                }
            }
        }


        function showToast(message, type) {
            const toastContainer = document.getElementById("toastContainer");
            if (!toastContainer) {
            console.error("Toast container not found in the DOM.");
            return;
            }

            const toast = document.createElement("div");
            toast.className = `toast align-items-center text-bg-${type} border-0`;
            toast.role = "alert";
            toast.ariaLive = "assertive";
            toast.ariaAtomic = "true";
            toast.innerHTML = `
            <div class="toast-header">
                <strong class="me-auto">${type === "success" ? "Success" : "Warning"}</strong>
                <small class="text-muted">Just now</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${message}
            </div>
            `;

            toastContainer.appendChild(toast);

            // Initialize and show the toast
            const bootstrapToast = new bootstrap.Toast(toast);
            bootstrapToast.show();

            // Remove the toast from the DOM after it hides
            toast.addEventListener("hidden.bs.toast", () => {
            toast.remove();
            });
        }
      
        function calculateAverage() {
          const targetAverage = parseFloat(
            document.getElementById("targetAverage").value
          );
          const numbers = [];
          for (let i = 1; i <= 11; i++) {
            const value = parseFloat(document.getElementById(`card${i}`).value);
            if (!isNaN(value)) {
              numbers.push(value);
            }
          }
      
          const total = numbers.reduce((sum, num) => sum + num, 0);
          const currentAverage = total / numbers.length;
          const resultElement = document.getElementById("result");
      
          if (currentAverage >= targetAverage) {
            resultElement.textContent = `The current average (${currentAverage.toFixed(
              2
            )}) meets or exceeds the target.`;

            showToast(
                `The current average (${currentAverage.toFixed(2)}) meets or exceeds the target.`,
                "success"
            );
          } else {
            const neededNumber = targetAverage * (numbers.length + 1) - total;
            if (isNaN(neededNumber))
            {
              alert('Please input target number !!!');
              location.reload();
            }else{
              resultElement.textContent = `You need at least ${neededNumber.toFixed(2)} as the next number to meet the target average.`;
              showToast(
                  `You need at least ${neededNumber.toFixed(2)} as the next number to meet the target average.`,
                  "warning"
              );
            }
            
          }
        }
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  </body>
</html>
